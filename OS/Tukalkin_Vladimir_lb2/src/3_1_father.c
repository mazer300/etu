/*
 ============================================================================
 Назначение программы: Демонстрация управления процессами посредством сигналов.

 Описание:
 Программа father.c запускает три процесса-потомка:
  - son1: реагирует на сигнал SIGUSR1 по умолчанию (завершение процесса).
  - son2: игнорирует сигнал SIGUSR1.
  - son3: перехватывает сигнал SIGUSR1 и обрабатывает его пользовательским обработчиком.

 Отец:
  - Порождает три процесса-потомка с помощью fork() и execl().
  - Отправляет каждому из них сигнал SIGUSR1 при помощи системного вызова kill().
  - Сохраняет информацию о процессах в файл processes.txt через системный вызов system("ps -f >> processes.txt").

 Особенности:
  - Реализованы три разных способа обработки сигнала в потомках.
  - Показано, какие процессы завершаются, какие продолжают работу после получения сигнала.
  - Дается возможность проанализировать таблицу процессов до и после отправки сигналов.

 Вывод:
 Программа позволяет на практике изучить поведение процессов при различных способах обработки сигналов
 и зафиксировать результаты в выводном файле.

 Автор: [Ваше Имя]
 Дата: [Текущая дата]
 ============================================================================
*/
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <signal.h>

int main() {
    pid_t pid1, pid2, pid3;

    pid1 = fork();
    if (pid1 == 0) {
        execl("./son1", "son1", NULL);
        perror("execl son1");
        exit(1);
    }

    pid2 = fork();
    if (pid2 == 0) {
        execl("./son2", "son2", NULL);
        perror("execl son2");
        exit(1);
    }

    pid3 = fork();
    if (pid3 == 0) {
        execl("./son3", "son3", NULL);
        perror("execl son3");
        exit(1);
    }

    sleep(2); // Подождать запуска потомков

    printf("Отец отправляет SIGUSR1 всем потомкам\n");
    kill(pid1, SIGUSR1);
    kill(pid2, SIGUSR1);
    kill(pid3, SIGUSR1);

    sleep(2);
    system("ps -f >> processes.txt");

    return 0;
}
