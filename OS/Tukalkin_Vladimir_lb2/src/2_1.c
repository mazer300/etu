/*
 * Программа: Псевдораспараллеливание вычислений через создание дочернего процесса
 *
 * Назначение программы:
 * 1. Создание дочернего процесса с помощью fork().
 * 2. В каждом процессе выполнить однократные вычисления и вывести информацию о себе (PID, PPID).
 * 3. Наблюдать, какой процесс владеет процессорным ресурсом на каждом этапе.
 * 4. Вывести сообщение о завершении работы программы.
 *
 * Компиляция:
 * gcc -o parallel parallel.c
 */

#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/types.h>
#include <sys/wait.h>

int main() {
    pid_t pid = fork(); // Создаем процесс-потомок

    if (pid < 0) {
        perror("Ошибка fork");
        exit(1);
    }

    if (pid == 0) {  // Дочерний процесс
        printf("Процесс-потомок: PID=%d, PPID=%d\n", getpid(), getppid());
        sleep(2); // Даем время для анализа конкуренции
        printf("Процесс-потомок завершен\n");
        exit(0);
    } else {  // Родительский процесс
        printf("Процесс-родитель: PID=%d, PID потомка=%d\n", getpid(), pid);
        wait(NULL); // Ждем завершения потомка
        printf("Родитель завершен\n");
    }
    return 0;
}
